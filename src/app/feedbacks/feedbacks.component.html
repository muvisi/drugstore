
<div class="row">
  <div class="col-sm-12">
    <div class="card">
      <h5 class="card-header">FeedBacks</h5>
      <div class="card-body">

        <mat-tab-group>
          <mat-tab label="Positive Feedbacks"> 
            <div class="row">
              <div class="col-sm-12">
            
                    
                    <div class="row">
                      <div class="col-sm-12">
                          <div class="row">
                        

                            <div class="col-sm-3">
                  
                              <mat-form-field appearance="outline">
                                <mat-label>Select Date</mat-label>
                                  <input matInput placeholder="Select date"    [(ngModel)]="date_positive"  [matDatepicker]="picker3" (ngModelChange)="positiveDateSelection()" autocomplete="off">
                                  <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                                  <mat-datepicker #picker3></mat-datepicker>
                                </mat-form-field>
                          </div>

                          <div class="col-sm-3">
                            <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                <mat-label>Visit Type</mat-label>
                                <mat-select  [(ngModel)]="visit_type_positive"  (selectionChange)="positiveVisitTypeChange()">
                                  <mat-option value="ALL">All</mat-option>
                                  <mat-option value="OUTPATIENT">Outpatient </mat-option>
                                  <mat-option value="INPATIENT">Inpatient </mat-option>
                                </mat-select>  
                              </mat-form-field>
                          </div>
              
              
                                <div class="col-sm-6" style="padding-top: 20px;">
                                  <button   (click)="downloadPositive()" class="btn btn-success pull-right">Download  xls</button>
                                </div>
                          </div>
                      </div>
                        
                      <div class="col-sm-12">
                        <div class="mat-elevation-z8 table-responsive">
                          <table mat-table [dataSource]="positive_dataSource">
                              <ng-container matColumnDef="sn">
                                  <th mat-header-cell *matHeaderCellDef>S/N</th>
                                  <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                          </ng-container>
                          <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef>Date </th>
                            <td mat-cell *matCellDef="let element"> {{element.created | date:'mediumDate'}} </td>
                          </ng-container>
                          <ng-container matColumnDef="patient">
                            <th mat-header-cell *matHeaderCellDef>Patient</th>
                            <td mat-cell *matCellDef="let element"> {{element.patient.first_name}} {{element.patient.last_name}} {{element.patient.other_names}} </td>
                          </ng-container>
                            <ng-container matColumnDef="service">
                              <th mat-header-cell *matHeaderCellDef>Service</th>
                              <td mat-cell *matCellDef="let element"> {{element.service}} </td>
                            </ng-container>
                              <ng-container matColumnDef="rating">
                                <th mat-header-cell *matHeaderCellDef>Rating</th>
                                <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
                              </ng-container>                           
                                <ng-container matColumnDef="compliments">
                                  <th mat-header-cell *matHeaderCellDef>Compliments </th>
                                  <td mat-cell *matCellDef="let element"> {{element.compliments}} </td>
                                </ng-container>   
                                <ng-container matColumnDef="comments">
                                  <th mat-header-cell *matHeaderCellDef>Comments </th>
                                  <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                                </ng-container>
                                <ng-container matColumnDef="visit_type">
                                  <th mat-header-cell *matHeaderCellDef>Visit Type </th>
                                  <td mat-cell *matCellDef="let element"> <span *ngIf="element.visit_type=='OUTPATIENT'">Outpatient</span><span  *ngIf="element.visit_type=='INPATIENT'">Inpatient</span></td>
                                </ng-container>     
                          
                          
                    
                            
                          
                            <tr mat-header-row *matHeaderRowDef="PositiveColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns:PositiveColumns;"></tr>
                          </table>
                    
                          <mat-paginator [pageSizeOptions]="[19,50]" showFirstLastButtons></mat-paginator>
                        </div>
                      </div>
                      </div>
                    </div>
                    </div>
                  </mat-tab> 
                  <mat-tab label="Negative Feedbacks"> 
                    <div class="row">
                      <div class="col-sm-12">
                    
                            
                            <div class="row">
                              <div class="col-sm-12">
                                <div class="row">
                        

                                  <div class="col-sm-3">
                        
                                    <mat-form-field appearance="outline">
                                      <mat-label>Select Date</mat-label>
                                        <input matInput placeholder="Select date"    [(ngModel)]="date_negative"  [matDatepicker]="picker4" (ngModelChange)="negativeDateSelection()" autocomplete="off">
                                        <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                                        <mat-datepicker #picker4></mat-datepicker>
                                      </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                  <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                      <mat-label>Visit Type</mat-label>
                                      <mat-select  [(ngModel)]="visit_type_negative"  (selectionChange)="negativeVisitTypeChange()">
                                        <mat-option value="ALL">All </mat-option>
                                        <mat-option value="OUTPATIENT">Outpatient </mat-option>
                                        <mat-option value="INPATIENT">Inpatient </mat-option>
                                      </mat-select>  
                                    </mat-form-field>
                                </div>
                    
                                      <div class="col-sm-6" style="padding-top: 20px;">
                                        <button   (click)="downloadNegative()" class="btn btn-success pull-right">Download  xls</button>
                                      </div>
                                </div>
                                </div>
                                
                              <div class="col-sm-12">
                                <div class="mat-elevation-z8 table-responsive">
                                  <table mat-table [dataSource]="negative_dataSource">
                                      <ng-container matColumnDef="sn">
                                          <th mat-header-cell *matHeaderCellDef>S/N</th>
                                          <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                                  </ng-container>
                                  <ng-container matColumnDef="date">
                                    <th mat-header-cell *matHeaderCellDef>Date </th>
                                    <td mat-cell *matCellDef="let element"> {{element.created | date:'mediumDate'}} </td>
                                  </ng-container>
                                  <ng-container matColumnDef="patient">
                                    <th mat-header-cell *matHeaderCellDef>Patient</th>
                                    <td mat-cell *matCellDef="let element"> {{element.patient.first_name}} {{element.patient.last_name}} {{element.patient.other_names}} </td>
                                  </ng-container>
                                    <ng-container matColumnDef="service">
                                      <th mat-header-cell *matHeaderCellDef>Service</th>
                                      <td mat-cell *matCellDef="let element"> {{element.service}} </td>
                                    </ng-container>
                                      <ng-container matColumnDef="rating">
                                        <th mat-header-cell *matHeaderCellDef>Rating</th>
                                        <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="issues">
                                          <th mat-header-cell *matHeaderCellDef>Issues </th>
                                          <td mat-cell *matCellDef="let element"> {{element.issues}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="comments">
                                          <th mat-header-cell *matHeaderCellDef>Comments </th>
                                          <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                                        </ng-container>     
                                  
                                        <ng-container matColumnDef="visit_type">
                                          <th mat-header-cell *matHeaderCellDef>Visit Type </th>
                                          <td mat-cell *matCellDef="let element"> <span *ngIf="element.visit_type=='OUTPATIENT'">Outpatient</span><span  *ngIf="element.visit_type=='INPATIENT'">Inpatient</span></td>
                                        </ng-container>  
                            
                                    
                                  
                                    <tr mat-header-row *matHeaderRowDef="NegativeColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns:NegativeColumns;"></tr>
                                  </table>
                            
                                  <mat-paginator [pageSizeOptions]="[19,50]" showFirstLastButtons></mat-paginator>
                                </div>
                              </div>
                              </div>
                            </div>
                            </div>
                          </mat-tab> 
                          <mat-tab label="Average Feedbacks"> 
                            <div class="row">
                              <div class="col-sm-12">
                            
                                    
                                    <div class="row">
                                      <div class="col-sm-12">
                                        <div class="row">
                        

                                          <div class="col-sm-3">
                                
                                            <mat-form-field appearance="outline">
                                              <mat-label>Select Date</mat-label>
                                                <input matInput placeholder="Select date"    [(ngModel)]="date_average"  [matDatepicker]="picker5" (ngModelChange)="averageDateSelection()" autocomplete="off">
                                                <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
                                                <mat-datepicker #picker5></mat-datepicker>
                                              </mat-form-field>
                                        </div>
                                        <div class="col-sm-3">
                                          <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                              <mat-label>Visit Type</mat-label>
                                              <mat-select  [(ngModel)]="visit_type_average"  (selectionChange)="averageVisitTypeChange()">
                                                <mat-option value="ALL">All </mat-option>
                                                <mat-option value="OUTPATIENT">Outpatient </mat-option>
                                                <mat-option value="INPATIENT">Inpatient </mat-option>
                                              </mat-select>  
                                            </mat-form-field>
                                        </div>
                            
                                              <div class="col-sm-6" style="padding-top: 20px;">
                                                <button   (click)="downloadAverage()" class="btn btn-success pull-right">Download  xls</button>
                                              </div>
                                        </div>
                                        </div>
                                        
                                      <div class="col-sm-12">
                                        <div class="mat-elevation-z8 table-responsive">
                                          <table mat-table [dataSource]="average_dataSource">
                                              <ng-container matColumnDef="sn">
                                                  <th mat-header-cell *matHeaderCellDef>S/N</th>
                                                  <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                                          </ng-container>
                                          <ng-container matColumnDef="date">
                                            <th mat-header-cell *matHeaderCellDef>Date </th>
                                            <td mat-cell *matCellDef="let element"> {{element.created | date:'mediumDate'}} </td>
                                          </ng-container>
                                          <ng-container matColumnDef="patient">
                                            <th mat-header-cell *matHeaderCellDef>Patient</th>
                                            <td mat-cell *matCellDef="let element"> {{element.patient.first_name}} {{element.patient.last_name}} {{element.patient.other_names}} </td>
                                          </ng-container>
                                            <ng-container matColumnDef="service">
                                              <th mat-header-cell *matHeaderCellDef>Service</th>
                                              <td mat-cell *matCellDef="let element"> {{element.service}} </td>
                                            </ng-container>
                                              <ng-container matColumnDef="rating">
                                                <th mat-header-cell *matHeaderCellDef>Rating</th>
                                                <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
                                              </ng-container>                                            
                                                <ng-container matColumnDef="comments">
                                                  <th mat-header-cell *matHeaderCellDef>Comments </th>
                                                  <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                                                </ng-container>     
                                                <ng-container matColumnDef="visit_type">
                                                  <th mat-header-cell *matHeaderCellDef>Visit Type </th>
                                                  <td mat-cell *matCellDef="let element"><span *ngIf="element.visit_type=='OUTPATIENT'">Outpatient</span><span  *ngIf="element.visit_type=='INPATIENT'">Inpatient</span>  </td>
                                                </ng-container>  
                                    
                                          
                                    
                                            
                                          
                                            <tr mat-header-row *matHeaderRowDef="AverageColumns"></tr>
                                            <tr mat-row *matRowDef="let row; columns:AverageColumns;"></tr>
                                          </table>
                                    
                                          <mat-paginator [pageSizeOptions]="[19,50]" showFirstLastButtons></mat-paginator>
                                        </div>
                                      </div>
                                      </div>
                                    </div>
                                    </div>
                                  </mat-tab> 
                </mat-tab-group>
     
              </div>
            </div>
       </div>
    </div>                
          
  <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '9px' }"></ngx-loading>