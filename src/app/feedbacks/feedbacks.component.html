
<div class="row">
  <div class="col-sm-12">
    <div class="card">
      <h5 class="card-header">FeedBack</h5>
      <div class="card-body">

        <mat-tab-group>

          <mat-tab label="All"> 
            <div class="row" style="margin-top: 10px;">
              <div class="row" style="margin-left: 30px;">
                <mat-form-field appearance="outline">
                <mat-label>Select Category</mat-label>
        
                <mat-select  [(ngModel)]="category" (ngModelChange)="Filter()">
                    <mat-option *ngFor="let item of dataSourcecategories" [value]="item.name">
                      {{item.name}}
                    </mat-option>
                     </mat-select>
                    </mat-form-field>
                </div>


                <div class="col-sm-3" style="margin-left: 50px;">
                  <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                      <mat-label>Period</mat-label>
                      <mat-select  [(ngModel)]="periodfilter"  (selectionChange)="PeriodFilter()">
                        <mat-option value="daily">Daily</mat-option>
                        <mat-option value="weekly">Weekly </mat-option>
                        <mat-option value="monthly">Monthly </mat-option>
                        <mat-option value="yearly">Yearly </mat-option>
                      </mat-select>  
                    </mat-form-field>
                </div>
                <!-- <div class="md-form">
                  <input placeholder="Selected date" type="text" id="date-picker-example" class="form-control datepicker">
                  <label for="date-picker-example">select Date</label>
                </div> -->
                <!-- <button type="button"  [disabled]="!periodfilter || !category" class="btn btn-success btn-lg">Search</button> -->
                
                <div class="col-sm-4">
                  <button class="btn btn-success btn-sm" style="margin-top: 10px;" (click)="FeedbackFilter()" [disabled]="!periodfilter || !category">Search</button>
              </div>
                
                <div class="col-sm-2">
                  <a type="button"    href="{{endpoint}}api/downloadfeedbackautomated/?category={{category}}&&period={{periodfilter}}" download class="btn btn-success btn-xs" style="float: right;"><i class="fa fa-download" aria-hidden="true"></i>
                   Download</a>
              </div>
              
              
              
                <div class="col-sm-12">
                
            
                    
                    <div class="row">
                      <div class="col-sm-12">
                          
                      
                      </div>
                        
                      <div class="col-sm-12">
                        <div class="mat-elevation-z8 table-responsive">
                          <table mat-table [dataSource]="dataSource">
                              <ng-container matColumnDef="sn">
                                  <th mat-header-cell *matHeaderCellDef>S/N</th>
                                  <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                          </ng-container>
                          <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef>Date </th>
                            <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.created | date:'mediumDate'}} </td>
                          </ng-container>
                          <ng-container matColumnDef="patient">
                            <th mat-header-cell *matHeaderCellDef>Patient</th>
                            <td mat-cell *matCellDef="let element"> {{element.client_name }} </td>
                          </ng-container>
                            <ng-container matColumnDef="service">
                              <th mat-header-cell *matHeaderCellDef>Service</th>
                              <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.service}} </td>
                            </ng-container>
                            <ng-container matColumnDef="phone">
                              <th mat-header-cell *matHeaderCellDef>phone</th>
                              <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.phone}} </td>
                            </ng-container>
                              <ng-container matColumnDef="rating">
                                <th mat-header-cell *matHeaderCellDef>Rating</th>
                                <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.rating}} </td>
                              </ng-container>                                            
                                <ng-container matColumnDef="comments">
                                  <th mat-header-cell *matHeaderCellDef>Type</th>
                                  <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.type| titlecase}} </td>
                                </ng-container>     
                                <ng-container matColumnDef="visit_type">
                                  <th mat-header-cell *matHeaderCellDef>Category </th>
                                  <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.category=='NEGATIVE'"><span class="badge bg-danger">Negative</span>
                                  </span> 
                                  <span *ngIf="element.category=='POSITIVE'">Positive
                                </span>
                                <span *ngIf="element.category=='AVERAGE'">Average
                                  </span>
                                
                                </td>
                                </ng-container> 
                                <ng-container matColumnDef="status">
                                  <th mat-header-cell *matHeaderCellDef>Status</th>
                               
                                  <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.is_called=='CALLED' && element.category=='NEGATIVE'"><span class="badge bg-success">called</span>
                                  </span> 
                                  <span *ngIf="element.is_called=='NOTCALLED' && element.category=='NEGATIVE'"><span class="badge bg-danger">Not Called</span>
                                </span>
                                
                                
                                </td>
                                </ng-container>  
                                <ng-container matColumnDef="action">
                                  <th mat-header-cell *matHeaderCellDef>Action</th>
                             
                                  <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.is_called=='CALLED' && element.category=='NEGATIVE'"><img width="20px" src="./assets/img/avatars/tick.png">
                                  </span> 
                                  <span *ngIf="element.is_called=='NOTCALLED' && element.category=='NEGATIVE'"><img width="20px" src="./assets/img/avatars/x.png">
                                </span>
                                
                                
                                </td>
                                </ng-container>  
                                <ng-container matColumnDef="type">
                                  <th mat-header-cell *matHeaderCellDef>Call</th>
                                  <td mat-cell *matCellDef="let element"><span *ngIf="element.category=='NEGATIVE'"><button type="button" (click)="clickRow(selected=element)"><img width="20px" src="./assets/img/avatars/call.png"></button></span>  </td>
                                </ng-container>
                    
                          
                    
                            
                          
                            <tr mat-header-row *matHeaderRowDef="AllColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns:AllColumns;"></tr>
                          </table>
                    
                          <mat-paginator [pageSizeOptions]="[100,200]" showFirstLastButtons></mat-paginator>
                        </div>
                      </div>
                      </div>
                    </div>
                    </div>
                  </mat-tab>

          <mat-tab label="Daily Not Called"> 
            <div class="row" style="margin-top: 10px;">
              


             
             
              
              
                <div class="col-sm-12">
                
            
                    
                    <div class="row">
                      <div class="col-sm-12">
                          
                      
                      </div>
                        
                      <div class="col-sm-12">
                        <div class="mat-elevation-z8 table-responsive">
                          <table mat-table [dataSource]="dataSourcenotcalled">
                              <ng-container matColumnDef="sn">
                                  <th mat-header-cell *matHeaderCellDef>S/N</th>
                                  <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                          </ng-container>
                          <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef>Date </th>
                            <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.created | date:'mediumDate'}} </td>
                          </ng-container>
                          <ng-container matColumnDef="patient">
                            <th mat-header-cell *matHeaderCellDef>Patient</th>
                            <td mat-cell *matCellDef="let element"> {{element.client_name }} </td>
                          </ng-container>
                            <ng-container matColumnDef="service">
                              <th mat-header-cell *matHeaderCellDef>Service</th>
                              <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.service}} </td>
                            </ng-container>
                            <ng-container matColumnDef="phone">
                              <th mat-header-cell *matHeaderCellDef>phone</th>
                              <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.phone}} </td>
                            </ng-container>
                              <ng-container matColumnDef="rating">
                                <th mat-header-cell *matHeaderCellDef>Rating</th>
                                <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.rating}} </td>
                              </ng-container>                                            
                                <ng-container matColumnDef="comments">
                                  <th mat-header-cell *matHeaderCellDef>Type</th>
                                  <td mat-cell *matCellDef="let element"  style="font-size: 12px;"> {{element.type| titlecase}} </td>
                                </ng-container>     
                                <ng-container matColumnDef="visit_type">
                                  <th mat-header-cell *matHeaderCellDef>Category </th>
                                  <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.category=='NEGATIVE'"><span class="badge bg-danger">Negative</span>
                                  </span> 
                                  <span *ngIf="element.category=='POSITIVE'">Positive
                                </span>
                                <span *ngIf="element.category=='AVERAGE'">Average
                                  </span>
                                
                                </td>
                                </ng-container> 
                                <ng-container matColumnDef="status">
                                  <th mat-header-cell *matHeaderCellDef>Status</th>
                                  <!-- <td mat-cell *matCellDef="let element"> {{element.category}} </td> -->
                                  <!-- /home/mwangangi/Healthix/FE/admin/src/assets/img/avatars/tick.png -->
                                  <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.is_called=='CALLED' && element.category=='NEGATIVE'"><img width="20px" src="./assets/img/avatars/tick.png">
                                  </span> 
                                  <span *ngIf="element.is_called=='NOTCALLED' && element.category=='NEGATIVE'"><img width="20px" src="./assets/img/avatars/x.png">
                                </span>
                                
                                
                                </td>
                                </ng-container>  
                                <ng-container matColumnDef="type">
                                  <th mat-header-cell *matHeaderCellDef>Call</th>
                                  <td mat-cell *matCellDef="let element"><span *ngIf="element.category=='NEGATIVE'"><button type="button" (click)="clickRow(selected=element)"><img width="20px" src="./assets/img/avatars/call.png"></button></span>  </td>
                                </ng-container>
                    
                          
                    
                            
                          
                            <tr mat-header-row *matHeaderRowDef="AllColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns:AllColumns;"></tr>
                          </table>
                    
                          <mat-paginator [pageSizeOptions]="[100,200]" showFirstLastButtons></mat-paginator>
                        </div>
                      </div>
                      </div>
                    </div>
                    </div>
                  </mat-tab>

                  <!-- <mat-tab label="Not Called Patient"> 
                    <div class="row">
                      <div class="col-sm-12">
                    
                            
                            <div class="row">
                              <div class="col-sm-12">
                                  <div class="row">
                                    <div class="col-sm-3">
                                      
                                    </div>
        
                                    
        
                                 
                      
                      
                                        
                                  </div>
                              </div>
                                
                              <div class="col-sm-12">
                                <div class="mat-elevation-z8 table-responsive">
                                  <table mat-table [dataSource]="notregistered_dataSource">
                                      <ng-container matColumnDef="sn">
                                          <th mat-header-cell *matHeaderCellDef>S/N</th>
                                          <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                                  </ng-container>
                                  <ng-container matColumnDef="date">
                                    <th mat-header-cell *matHeaderCellDef>Date </th>
                                    <td mat-cell *matCellDef="let element"> {{element.created | date:'mediumDate'}} </td>
                                  </ng-container>
                                  <ng-container matColumnDef="patient">
                                    <th mat-header-cell *matHeaderCellDef>Patient</th>
                                    <td mat-cell *matCellDef="let element"> {{element.patient.first_name}} {{element.patient.last_name}}</td>
                                  </ng-container>
                                    <ng-container matColumnDef="service">
                                      <th mat-header-cell *matHeaderCellDef>Service</th>
                                      <td mat-cell *matCellDef="let element"> {{element.service}} </td>
                                    </ng-container>
                                      <ng-container matColumnDef="rating">
                                        <th mat-header-cell *matHeaderCellDef>Rating</th>
                                        <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
                                      </ng-container>                           
                                        <ng-container matColumnDef="compliments">
                                          <th mat-header-cell *matHeaderCellDef>Compliments </th>
                                          <td mat-cell *matCellDef="let element"> {{element.compliments}} </td>
                                        </ng-container>   
                                        <ng-container matColumnDef="comments">
                                          <th mat-header-cell *matHeaderCellDef>Comments </th>
                                          <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="visit_type">
                                          <th mat-header-cell *matHeaderCellDef>Visit Type </th>
                                          <td mat-cell *matCellDef="let element"> <span *ngIf="element.visit_type=='OUTPATIENT'">Outpatient</span><span  *ngIf="element.visit_type=='INPATIENT'">Inpatient</span></td>
                                        </ng-container>     
                                  
                                  
                            
                                    
                                  
                                    <tr mat-header-row *matHeaderRowDef="PositiveColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns:PositiveColumns;"></tr>
                                  </table>
                            
                                  <mat-paginator [pageSizeOptions]="[100,200]" showFirstLastButtons></mat-paginator>
                                </div>
                              </div>
                              </div>
                            </div>
                            </div>
                          </mat-tab>  -->
          <mat-tab label="Positive"> 
            <div class="row">
              <div class="col-sm-12">
            
                    
                    <div class="row">
                      <div class="col-sm-12">
                          <div class="row">
                            <div class="col-sm-3">
                              <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                  <mat-label>Period</mat-label>
                                  <mat-select  [(ngModel)]="period"  (selectionChange)="periodChangedPositive()">
                                    <mat-option value="daily">Daily</mat-option>
                                    <mat-option value="weekly">Weekly </mat-option>
                                    <mat-option value="monthly">Monthly </mat-option>
                                    <mat-option value="yearly">Yearly </mat-option>
                                  </mat-select>  
                                </mat-form-field>
                            </div>

                            <div class="col-sm-3">
                  
                              <mat-form-field appearance="outline">
                                <mat-label>Select Date</mat-label>
                                  <input matInput placeholder="Select date" [(ngModel)]="date_positive"  [matDatepicker]="picker3" (ngModelChange)="positiveDateSelection()" autocomplete="off">
                                  <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                                  <mat-datepicker #picker3></mat-datepicker>
                                </mat-form-field>
                          </div>

                          <div class="col-sm-3">
                            <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                <mat-label>Visit Type</mat-label>
                                <mat-select  [(ngModel)]="visit_type_positive"  (selectionChange)="positiveVisitTypeChange()">
                                  <mat-option value="ALL">All</mat-option>
                                  <mat-option value="OUTPATIENT">Outpatient </mat-option>
                                  <mat-option value="INPATIENT">Inpatient </mat-option>
                                </mat-select>  
                              </mat-form-field>
                          </div>
              
              
                                <div class="col-sm-3" style="padding-top: 20px;">
                                  <button   (click)="downloadPositive()" class="btn btn-success pull-right">Download  xls</button>
                                </div>
                          </div>
                      </div>
                        
                      <div class="col-sm-12">
                        <div class="mat-elevation-z8 table-responsive">
                          <table mat-table [dataSource]="positive_dataSource">
                              <ng-container matColumnDef="sn">
                                  <th mat-header-cell *matHeaderCellDef>S/N</th>
                                  <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                          </ng-container>
                          <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef>Date </th>
                            <td mat-cell *matCellDef="let element"> {{element.created | date:'mediumDate'}} </td>
                          </ng-container>
                          <ng-container matColumnDef="patient">
                            <th mat-header-cell *matHeaderCellDef>Patient</th>
                            <td mat-cell *matCellDef="let element"> {{element.client_name }}</td>
                          </ng-container>
                            <ng-container matColumnDef="service">
                              <th mat-header-cell *matHeaderCellDef>Service</th>
                              <td mat-cell *matCellDef="let element"> {{element.service}} </td>
                            </ng-container>
                              <ng-container matColumnDef="rating">
                                <th mat-header-cell *matHeaderCellDef>Rating</th>
                                <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
                              </ng-container>                           
                                <ng-container matColumnDef="compliments">
                                  <th mat-header-cell *matHeaderCellDef>Compliments </th>
                                  <td mat-cell *matCellDef="let element"> {{element.compliments}} </td>
                                </ng-container>   
                                <ng-container matColumnDef="comments">
                                  <th mat-header-cell *matHeaderCellDef>Comments </th>
                                  <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                                </ng-container>
                                <ng-container matColumnDef="visit_type">
                                  <th mat-header-cell *matHeaderCellDef>Visit Type </th>
                                  <td mat-cell *matCellDef="let element"> <span *ngIf="element.visit_type=='OUTPATIENT'">Outpatient</span><span  *ngIf="element.visit_type=='INPATIENT'">Inpatient</span></td>
                                </ng-container>     
                          
                          
                    
                            
                          
                            <tr mat-header-row *matHeaderRowDef="PositiveColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns:PositiveColumns;"></tr>
                          </table>
                    
                          <mat-paginator [pageSizeOptions]="[100,200]" showFirstLastButtons></mat-paginator>
                        </div>
                      </div>
                      </div>
                    </div>
                    </div>
                  </mat-tab> 
                  <mat-tab label="Negative"> 
                    <div class="row">
                      <div class="col-sm-12">
                    
                            
                            <div class="row">
                              <div class="col-sm-12">
                                <div class="row">
                                    <div class="col-sm-3">
                                      <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                          <mat-label>Period</mat-label>
                                          <mat-select  [(ngModel)]="period2"  (selectionChange)="periodChangedNegative()">
                                            <mat-option value="daily">Daily</mat-option>
                                            <mat-option value="weekly">Weekly </mat-option>
                                            <mat-option value="monthly">Monthly </mat-option>
                                            <mat-option value="yearly">Yearly </mat-option>
                                          </mat-select>  
                                        </mat-form-field>
                                    </div>

                                  <div class="col-sm-3">
                        
                                    <mat-form-field appearance="outline">
                                      <mat-label>Select Date</mat-label>
                                        <input matInput placeholder="Select date"    [(ngModel)]="date_negative"  [matDatepicker]="picker4" (ngModelChange)="negativeDateSelection()" autocomplete="off">
                                        <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                                        <mat-datepicker #picker4></mat-datepicker>
                                      </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                  <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                      <mat-label>Visit Type</mat-label>
                                      <mat-select  [(ngModel)]="visit_type_negative"  (selectionChange)="negativeVisitTypeChange()">
                                        <mat-option value="ALL">All </mat-option>
                                        <mat-option value="OUTPATIENT">Outpatient </mat-option>
                                        <mat-option value="INPATIENT">Inpatient </mat-option>
                                      </mat-select>  
                                    </mat-form-field>
                                </div>
                    
                                      <div class="col-sm-3" style="padding-top: 20px;">
                                        <button   (click)="downloadNegative()" class="btn btn-success pull-right">Download  xls</button>
                                      </div>
                                </div>
                                </div>
                                
                              <div class="col-sm-12">
                                <div class="mat-elevation-z8 table-responsive">
                                  <table mat-table [dataSource]="negative_dataSource">
                                      <ng-container matColumnDef="sn">
                                          <th mat-header-cell *matHeaderCellDef>S/N</th>
                                          <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                                  </ng-container>
                                  <ng-container matColumnDef="date">
                                    <th mat-header-cell *matHeaderCellDef>Date </th>
                                    <td mat-cell *matCellDef="let element"> {{element.created | date:'mediumDate'}} </td>
                                  </ng-container>
                                  <ng-container matColumnDef="patient">
                                    <th mat-header-cell *matHeaderCellDef>Patient</th>
                                    <td mat-cell *matCellDef="let element"> {{element.client_name }} </td>
                                  </ng-container>
                                    <ng-container matColumnDef="service">
                                      <th mat-header-cell *matHeaderCellDef>Service</th>
                                      <td mat-cell *matCellDef="let element"> {{element.service}} </td>
                                    </ng-container>
                                      <ng-container matColumnDef="rating">
                                        <th mat-header-cell *matHeaderCellDef>Rating</th>
                                        <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="issues">
                                          <th mat-header-cell *matHeaderCellDef>Issues </th>
                                          <td mat-cell *matCellDef="let element"> {{element.issues}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="comments">
                                          <th mat-header-cell *matHeaderCellDef>Comments </th>
                                          <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                                        </ng-container>     
                                  
                                        <ng-container matColumnDef="visit_type">
                                          <th mat-header-cell *matHeaderCellDef>Visit Type </th>
                                          <td mat-cell *matCellDef="let element"> <span *ngIf="element.visit_type=='OUTPATIENT'">Outpatient</span><span  *ngIf="element.visit_type=='INPATIENT'">Inpatient</span></td>
                                        </ng-container>  
                            
                                    
                                  
                                    <tr mat-header-row *matHeaderRowDef="NegativeColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns:NegativeColumns;"></tr>
                                  </table>
                            
                                  <mat-paginator [pageSizeOptions]="[100,200]" showFirstLastButtons></mat-paginator>
                                </div>
                              </div>
                              </div>
                            </div>
                            </div>
                          </mat-tab> 
                          <mat-tab label="Average"> 
                            <div class="row">
                              <div class="col-sm-12">
                            
                                    
                                    <div class="row">
                                      <div class="col-sm-12">
                                        <div class="row">
                                                                                                                                                                                                                  
                                          <div class="col-sm-3">
                                            <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                                <mat-label>Period</mat-label>
                                                <mat-select  [(ngModel)]="period2"  (selectionChange)="periodChangedAverage()">
                                                  <mat-option value="daily">Daily</mat-option>
                                                  <mat-option value="weekly">Weekly </mat-option>
                                                  <mat-option value="monthly">Monthly </mat-option>
                                                  <mat-option value="yearly">Yearly </mat-option>
                                                </mat-select>  
                                              </mat-form-field>
                                          </div>                                
          
                                                                        <div class="col-sm-3">
                                
                                            <mat-form-field appearance="outline">
                                              <mat-label>Select Date</mat-label>
                                                <input matInput placeholder="Select date"    [(ngModel)]="date_average"  [matDatepicker]="picker5" (ngModelChange)="averageDateSelection()" autocomplete="off">
                                                <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
                                                <mat-datepicker #picker5></mat-datepicker>
                                              </mat-form-field>
                                        </div>
                                        <div class="col-sm-3">
                                          <mat-form-field appearance="outline"  class="example-full-width" style="max-width: 400px;">
                                              <mat-label>Visit Type</mat-label>
                                              <mat-select  [(ngModel)]="visit_type_average"  (selectionChange)="averageVisitTypeChange()">
                                                <mat-option value="ALL">All </mat-option>
                                                <mat-option value="OUTPATIENT">Outpatient </mat-option>
                                                <mat-option value="INPATIENT">Inpatient </mat-option>
                                              </mat-select>  
                                            </mat-form-field>
                                        </div>
                            
                                              <div class="col-sm-3" style="padding-top: 20px;">
                                                <button   (click)="downloadAverage()" class="btn btn-success pull-right">Download  xls</button>
                                              </div>
                                        </div>
                                        </div>
                                        
                                      <div class="col-sm-12">
                                        <div class="mat-elevation-z8 table-responsive">
                                          <table mat-table [dataSource]="average_dataSource">
                                              <ng-container matColumnDef="sn">
                                                  <th mat-header-cell *matHeaderCellDef>S/N</th>
                                                  <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                                          </ng-container>
                                          <ng-container matColumnDef="date">
                                            <th mat-header-cell *matHeaderCellDef>Date </th>
                                            <td mat-cell *matCellDef="let element"> {{element.created | date:'mediumDate'}} </td>
                                          </ng-container>
                                          <ng-container matColumnDef="patient">
                                            <th mat-header-cell *matHeaderCellDef>Patient</th>
                                            <td mat-cell *matCellDef="let element"> {{element.client_name}} </td>
                                          </ng-container>
                                            <ng-container matColumnDef="service">
                                              <th mat-header-cell *matHeaderCellDef>Service</th>
                                              <td mat-cell *matCellDef="let element"> {{element.service}} </td>
                                            </ng-container>
                                              <ng-container matColumnDef="rating">
                                                <th mat-header-cell *matHeaderCellDef>Rating</th>
                                                <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
                                              </ng-container>                                            
                                                <ng-container matColumnDef="comments">
                                                  <th mat-header-cell *matHeaderCellDef>Comments </th>
                                                  <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                                                </ng-container>     
                                                <ng-container matColumnDef="visit_type">
                                                  <th mat-header-cell *matHeaderCellDef>Visit Type </th>
                                                  <td mat-cell *matCellDef="let element"><span *ngIf="element.visit_type=='OUTPATIENT'">Outpatient</span><span  *ngIf="element.visit_type=='INPATIENT'">Inpatient</span>  </td>
                                                </ng-container>  
                                    
                                          
                                    
                                            
                                          
                                            <tr mat-header-row *matHeaderRowDef="AverageColumns"></tr>
                                            <tr mat-row *matRowDef="let row; columns:AverageColumns;"></tr>
                                          </table>
                                    
                                          <mat-paginator [pageSizeOptions]="[100,200]" showFirstLastButtons></mat-paginator>
                                        </div>
                                      </div>
                                      </div>
                                    </div>
                                    </div>
                                  </mat-tab> 
                                
                </mat-tab-group>
     
              </div>
            </div>
       </div>
    </div>                
          
  <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '9px' }"></ngx-loading>