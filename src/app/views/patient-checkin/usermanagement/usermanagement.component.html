<div class="row">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
             <h5> Users Management</h5>
            </div>
            <mat-tab-group>
              <mat-tab label="Active Users"> 
                <div class="card-body">
                
                  <div class="row">
                     <div class="col-sm-3">
                       <mat-form-field>
                       <input type="text" (keyup)="searchUser($event.target.value)" matInput placeholder="Search">
                       </mat-form-field>
                     </div>
                     <div class="col-sm-9">
                       <button class="btn btn-success pull-right"  (click)="addModal.show()">Add User</button>
                     </div>
                    
                    </div>
       
                    <div class="mat-elevation-z8 table-responsive">
                     <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" #uSort="matSort"  matSort>
                         <ng-container matColumnDef="sn">
                           <th mat-header-cell *matHeaderCellDef mat-sort-header>S/N</th>
                           <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                           </ng-container>
                         <ng-container matColumnDef="name" >
                             <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;"> NAME </th>
                             <td mat-cell *matCellDef="let element" style="font-size: 12px; margin-left:10px"> {{element.first_name |titlecase}} {{element.last_name | uppercase}} </td>
                             </ng-container>
                       
                             <ng-container matColumnDef="phone">
                             <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">PHONE</th>
                             <td mat-cell *matCellDef="let element" style="font-size: 12px; margin-left:10px"> {{element.phone}} </td>
                             </ng-container>
                             <ng-container matColumnDef="email">
                             <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;"> EMAIL </th>
                             <td mat-cell *matCellDef="let element"style="font-size: 12px; margin-left:10px"> {{element.email |titlecase }} </td>
                             </ng-container>
                             <ng-container matColumnDef="role">
                             <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">ROLE</th>
                             <td mat-cell *matCellDef="let element" style="font-size: 12px; margin-left:10px"> {{element.role |titlecase}} </td>
                             </ng-container>
                             <ng-container matColumnDef="department">
                               <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">DEPARTMENT</th>
                               <td mat-cell *matCellDef="let element" style="font-size: 12px; margin-left:10px"> {{element.department | uppercase}} </td>
                               </ng-container>
                               <ng-container matColumnDef="edit">
                                 <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">EDIT</th>
                                 <td mat-cell *matCellDef="let element"  (click)="employeeEdit(element)">
                                   <mat-icon color="primary">create</mat-icon>
                                    </td>
                               </ng-container>
                               <ng-container matColumnDef="deactivate">
                                 <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">DEACTIVATE</th>
                                 <td mat-cell *matCellDef="let element">
                                   <button class="btn btn-danger btn-sm" [disabled]="!element.is_active" (click)="deactivate(element)" style="font-size: 12px; margin-left:10px">Deactivate</button>
                                    </td>
                               </ng-container>
                         
                               <ng-container matColumnDef="activate">
                                 <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px; ">ACTIVATE</th>
                                 <td mat-cell *matCellDef="let element">
                                   <a class="btn btn-success btn-sm" (click)="deactivate(element)" [disabled]="element.is_active" style="font-size: 12px; margin-left:10px">Activate</a>
                                    </td>
                               </ng-container>
                               <ng-container matColumnDef="reset">
                                 <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">PASSWORD RESET</th>
                                 <td mat-cell *matCellDef="let element">
                                   <button class="btn btn-success btn-sm" (click)="reset(selected2=element)" style="font-size: 12px; margin-left:10px">Reset</button>
                                    </td>
                               </ng-container>
                               <ng-container matColumnDef="delete">
                                 <th mat-header-cell *matHeaderCellDef style="font-size: 12px;">DELETE</th>
                                 <td mat-cell *matCellDef="let element"><mat-icon color="warn" (click)="selected=element;staticModal.show()">delete_sweep</mat-icon></td>
                               </ng-container>
                         
                       
                         <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                         <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
                       </table>
                       <mat-paginator [pageSizeOptions]="[15,30,100]" showFirstLastButtons></mat-paginator>
                  </div>
                    
                
                 </div>
                 </mat-tab>
              <mat-tab label="Deleted Users">
                <div class="card-body">
                
                 
       
                    <div class="mat-elevation-z8 table-responsive">
                     <table mat-table [dataSource]="archivedataSource" class="mat-elevation-z8" #uSort="matSort"  matSort>
                         <ng-container matColumnDef="sn">
                           <th mat-header-cell *matHeaderCellDef mat-sort-header>S/N</th>
                           <td mat-cell *matCellDef="let element;let i=index"> {{i+1}} </td>
                           </ng-container>
                         <ng-container matColumnDef="name" >
                             <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;"> NAME </th>
                             <td mat-cell *matCellDef="let element" style="font-size: 12px; margin-left:10px"> {{element.first_name |titlecase}} {{element.last_name |titlecase}} </td>
                             </ng-container>
                       
                             <ng-container matColumnDef="email">
                             <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;"> EMAIL </th>
                             <td mat-cell *matCellDef="let element"style="font-size: 12px; margin-left:10px"> {{element.email |titlecase }} </td>
                             </ng-container>
                           
                             <ng-container matColumnDef="department">
                               <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">DEPARTMENT</th>
                               <td mat-cell *matCellDef="let element" style="font-size: 12px; margin-left:10px"> {{element.department | uppercase}} </td>
                               </ng-container>
                               <ng-container matColumnDef="deletedby">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">DELETED BY</th>
                                <td mat-cell *matCellDef="let element" style="font-size: 12px; margin-left:10px"> {{element.deleted_by |titlecase}} </td>
                                </ng-container>
                                <ng-container matColumnDef="deleteddate">
                                  <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">DATE DELETED</th>
                                  <td mat-cell *matCellDef="let element" style="font-size: 12px; margin-left:10px"> {{element.deleted_date | date:'medium'}} </td>
                                  </ng-container>
                               <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">Status</th>
                                <td mat-cell *matCellDef="let element" ng-if="element.is_archive==='true'" style="font-size: 12px; margin-left:10px"><span class="badge badge-danger" style="font-size: 12px;">User Deleted</span> </td>
                                </ng-container>
                                <ng-container matColumnDef="restore">
                                  <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-size: 12px;">Restore Deleted</th>
                                  <td mat-cell *matCellDef="let element">
                                    <button class="btn btn-success btn-sm" (click)="restored(selectedd=element)" style="font-size: 12px; margin-left:10px">Restore</button>
                                     </td>
                                </ng-container>
                              
                               
                         
                       
                         <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                         <tr mat-row *matRowDef="let row; columns: displayedColumns1;" ></tr>
                       </table>
                       <mat-paginator [pageSizeOptions]="[15,30,100]" showFirstLastButtons></mat-paginator>
                  </div>
                </div>

              </mat-tab>
            
            </mat-tab-group>
           
          </div>
    </div>
</div>
<div class="modal fade" bsModal #userModal="bs-modal" [config]="{backdrop: 'static'}"
tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header bg-success">
 <h5>
 <span>Update User</span>
 </h5>
  <button type="button" class="close" (click)="userModal.hide()" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
 <div class="modal-body">
   <div class="row">
           
     <div class="col-sm-6">
       <mat-form-field appearance="outline">
         <mat-label>First Name</mat-label>
           <input type="text" id="text-input" name="first_name"  placeholder="FIRST NAME"
           [(ngModel)]="employee.first_name" matInput>
       </mat-form-field>
     </div>
       <div class="col-sm-6">
           <mat-form-field appearance="outline">
             <mat-label>Last Name</mat-label>
               <input type="text" id="text-input"  placeholder="LAST NAME"
               [(ngModel)]="employee.last_name" matInput>
           </mat-form-field>
         </div>
         <div class="col-sm-6">
           <mat-form-field appearance="outline">
               <mat-label>Gender</mat-label>
               <mat-select [(ngModel)]="employee.gender">
                 <mat-option value="Female">Female</mat-option>
                 <mat-option value="Male">Male</mat-option>
               </mat-select>
             </mat-form-field>
        </div>
         <div class="col-sm-6">
           <mat-form-field appearance="outline">
             <mat-label>Department</mat-label>
             <mat-select [(ngModel)]="employee.department">
               <mat-option value="ICT">ICT</mat-option>
               <mat-option value="Finance">Finance</mat-option>
               <mat-option value="Others">Others</mat-option>
              
             </mat-select>
             
           </mat-form-field>
 
         
           </div>
      
      <div class="col-sm-6">
         <mat-form-field appearance="outline">
             <mat-label>Role</mat-label>
             <mat-select [(ngModel)]="employee.role">
               <mat-option value="user">User</mat-option>
               <mat-option value="aaradmin">AAR Admin</mat-option>
               
             </mat-select>
             
           </mat-form-field>
      </div>
      <div class="col-sm-6">
         <mat-form-field appearance="outline">
           <mat-label>Phone</mat-label>
             <input type="text" placeholder="PHONE"
             [(ngModel)]="employee.phone" matInput>
         </mat-form-field>
       </div>
     
         <div class="col-sm-6">
           <mat-form-field appearance="outline">
             <mat-label>Email</mat-label>
               <input type="email" id="text-input"   placeholder="EMAIL"
               [(ngModel)]="employee.email" matInput>
           </mat-form-field>
          
           
           </div>
           <div class="col-sm-6">
              
             </div>
           
              <div class="col-sm-12">
              </div>
              <div class="col-sm-12">
                 <button class="btn btn-primary btn-sm pull-right" (click)="updateUser()" style="margin-right: 8px;"> Update </button>
               </div>
   </div>
 </div>
</div>
</div>
</div> 




<div class="modal fade" bsModal #addModal="bs-modal" [config]="{backdrop: 'static'}"
tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header bg-success">
 <h5>
 <span>Create User Account</span>
 </h5>
  <button type="button" class="close" (click)="addModal.hide()" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
 <div class="modal-body">
    <form [formGroup]="registerForm" (ngSubmit)="addUser()">
   <div class="row">
           
     <div class="col-sm-6">
       <mat-form-field appearance="outline">
         <mat-label>First Name</mat-label>
           <input type="text" id="text-input" name="first_name"  placeholder="FIRST NAME"
           formControlName="first_name" matInput>
       </mat-form-field>
     </div>
       <div class="col-sm-6">
           <mat-form-field appearance="outline">
             <mat-label>Last Name</mat-label>
               <input type="text" id="text-input"  placeholder="LAST NAME"
               formControlName="last_name" matInput>
           </mat-form-field>
         </div>
         <div class="col-sm-6">
           <mat-form-field appearance="outline">
               <mat-label>Gender</mat-label>
               <mat-select formControlName="gender">
                 <mat-option value="Female">Female</mat-option>
                 <mat-option value="Male">Male</mat-option>
                 <mat-option value="Other">Other</mat-option>

               </mat-select>
             </mat-form-field>
        </div>
        
      
      <div class="col-sm-6">
         <mat-form-field appearance="outline">
             <mat-label>Role</mat-label>
             <mat-select formControlName="role">
               <mat-option value="user">User</mat-option>
               <mat-option value="aaradmin">AAR Admin</mat-option>
               <!-- <mat-option value="FrontOffice">Front Office</mat-option> -->
               <!-- <mat-option value="PatientExperience">P-Experience</mat-option> -->
               <!-- <mat-option value="front_office">Front Office</mat-option> -->
             </mat-select>
           </mat-form-field>
      </div>
      <div class="col-sm-6">
         <mat-form-field appearance="outline">
           <mat-label>Phone</mat-label>
             <input type="text" placeholder="PHONE"
             formControlName="phone" matInput>
         </mat-form-field>
       </div>
     
         <div class="col-sm-6">
           <mat-form-field appearance="outline">
             <mat-label>Department</mat-label>
             <mat-select  formControlName="department">
               <mat-option value="Finance">Finance</mat-option>
               <mat-option value="ICT">ICT</mat-option>
               <mat-option value="Procurement">Procurement</mat-option>
               <mat-option value="Mantainance">Mantainance</mat-option>
               <mat-option value="Customer Service">Customer Service</mat-option>
               <mat-option value="Clinical Services">Clinical Services</mat-option>
               <mat-option value="Others">Others</mat-option>
             </mat-select>
           </mat-form-field>
           
           </div>
           <div class="col-sm-6">
               <mat-form-field appearance="outline">
                 <mat-label>Email</mat-label>
                   <input type="email" id="text-input"   placeholder="EMAIL"
                   formControlName="email" matInput>
               </mat-form-field>
             </div>
           
              <div class="col-sm-12">
              </div>
              <div class="col-sm-12">
                 <button class="btn btn-primary btn-sm pull-right"  style="margin-right: 8px;">Submit</button>
               </div>
   </div>
 </form>
 </div>
</div>
</div>
</div> 
<div class="modal fade" bsModal #resetModal="bs-modal" [config]="{backdrop: 'static'}"
tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header bg-success">
<h5>
<span>Reset Password</span>
</h5>
<button type="button" class="close" (click)="resetModal.hide()" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">&times;</span>
</button>
</div>
<div class="modal-body">
<form [formGroup]="resetForm" (ngSubmit)="resetUser()">
<div class="row">
      
<div class="col-sm-6">
 <mat-form-field appearance="outline">
   <mat-label>Email</mat-label>
     <input type="email" id="text-input"   placeholder="EMAIL"
     formControlName="email"  matInput>
 </mat-form-field>
</div>

  
    <div class="col-sm-6">
      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
          <input type="password" placeholder="PASSWORD"
          formControlName="password" matInput>
      </mat-form-field>

       
      </div>
      <div class="col-sm-6">
       <mat-form-field appearance="outline">
         <mat-label> Confirm Password</mat-label>
           <input type="confirmpassword" placeholder=" CONFIRM PASSWORD"
           formControlName="confirmpassword" matInput>
       </mat-form-field>

        
       </div>
 

 

   
      
      
         
         <div class="col-sm-12">
            <button class="btn btn-primary btn-sm pull-right"  style="margin-right: 8px;">Reset</button>
          </div>
</div>
</form>
</div>
</div>
</div>
</div> <div class="modal fade" bsModal #staticModal="bs-modal" [config]="{backdrop: 'static'}"
tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
<div class="modal-dialog modal-sm">
<div class="modal-content">
<div class="modal-header">
<h6 id="dialog-static-name" class="modal-title pull-left">Confirmation</h6>
<button type="button" class="btn-close close pull-right" aria-label="Close" (click)="staticModal.hide()">
<span aria-hidden="true" class="visually-hidden">&times;</span>
</button>
</div>
<div class="modal-body">

<div class="row">
<div class="col-sm-12">
Please confirm you want to delete?
</div>
<div class="col-sm-12" style="text-align: right;">
<button class="btn btn-danger btn-sm" (click)="staticModal.hide()">cancel</button>
<button (click)="delete()" class="btn btn-success btn-sm">confirm</button>
</div>
</div>
</div>
</div>
</div>
</div>  
<div class="modal fade" bsModal #restoreModal="bs-modal" [config]="{backdrop: 'static'}"
tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
<div class="modal-dialog modal-sm">
<div class="modal-content">
<div class="modal-header">
<h6 id="dialog-static-name" class="modal-title pull-left">Confirmation</h6>
<button type="button" class="btn-close close pull-right" aria-label="Close" (click)="restoreModal.hide()">
<span aria-hidden="true" class="visually-hidden">&times;</span>
</button>
</div>
<div class="modal-body">

<div class="row">
<div class="col-sm-12">
Please confirm you want to Restore User?
</div>
<div class="col-sm-12" style="text-align: right;">
<button class="btn btn-danger btn-sm" (click)="restoreModal.hide()">cancel</button>
<button (click)="restore()" class="btn btn-success btn-sm">confirm</button>
</div>
</div>
</div>
</div>
</div>
</div> 
<div class="modal fade" bsModal #decisionModal="bs-modal" [config]="{backdrop: 'static'}"
tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
<div class="modal-dialog modal-sm">
<div class="modal-content">
<div class="modal-header bg-success">
<h6 id="dialog-static-name" class="modal-title pull-left">Confirmation For Notification Message</h6>
<button type="button" class="btn-close close pull-right" aria-label="Close" (click)="decisionModal.hide()">
<span aria-hidden="true" class="visually-hidden">&times;</span>
</button>
</div>
<div class="modal-body">

<div class="row">
<div class="col-sm-12">
Please, Select the Password Reset Option.
</div>
<div class="col-sm-12" style="text-align: right;">
<button (click)="ByEmail()" class="btn btn-success btn-sm"> Push Email</button> 

<button (click)="BySMS()" class="btn btn-success btn-sm"> Push SMS</button> 
`     </div>
</div>
</div>
</div>
</div>
</div>  



<div class="modal fade" bsModal #profileModal="bs-modal" [config]="{backdrop: 'static'}"
tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
  
  <button type="button" class="close" (click)="profileModal.hide()" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
 <div class="modal-body">
  
   <div class="row">
     
     <div class="col-sm-12">
       <div class="row">
         <div class="col-sm-4">
              <div class="col-sm-12">
               </div>
                <div class="col-sm-12">
                    <img src="../../../../assets/img/avatars/account.png" width="140px" alt="">
                </div>
                <div class="col-sm-12 text-primary">
                  <span style="font-weight: 700;font-size: 12px;">{{selectedUser.name| uppercase}}</span>
                </div>
                <div class="col-sm-12">
                    <span class="muted" style="text-transform: capitalize;font-family: lato light"><b style="margin-left: 40px;">{{selectedUser.role}}</b></span>
                </div>
         </div>
         <div class="col-sm-8">
           <mat-card>
              <h4 style="font-family: lato"><u>User Details</u></h4>
              <div class="row" style="font-weight: bolder;font-family:lato light">
                <div class="col-sm-12">
                  Department : {{selectedUser.department  | uppercase}}
                </div>
                <div class="col-sm-12">
                  Email : {{selectedUser.email  | uppercase}}
                  </div>
                  <div class="col-sm-12">Phone : {{selectedUser.phone}}</div>

                  <div class="col-sm-12">
                    Status 
                   <button class="btn btn-success btn-sm" *ngIf="selectedUser.is_active">ACTIVE</button>
                    <button class="btn btn-danger btn-sm" *ngIf="!selectedUser.is_active">INACTIVE</button>
                  </div>
                  <div class="col-sm-12">
                    <button mat-raised-button style="margin-top:10px;" (click)="deactivate(selectedUser)"> <i class="icon-lock"></i>  Lock/Unlock</button>
                  </div>
                  <div class="col-sm-12">
                      <button mat-raised-button color="primary" style="margin-top:10px;" (click)="employee=selectedUser;edit=false;profileModal.hide()"> <mat-icon>create</mat-icon> Edit User</button>
                    </div>
              </div>
             
           </mat-card>
         </div>
       </div>
     </div>
   </div>
 </div>
</div>
</div>
</div>

<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>