<div class="row">
  <div class="col-sm-12">
      <div class="card">
          <h6 class="card-header bg-success">Feedback Details

          </h6>
          <div class="card-body">
              <div class="row">
                  <div class="col-sm-12">
                    <div class="row">
                      <div class="col-sm-12 col-md-1 col-lg-1 col-3">
                        <img src="assets/img/avatars/female.png" class="rounded-circle" alt="" style="width: 90px;"*ngIf="client_gender=='Female'">
                        <img src="assets/img/avatars/male.png" class="rounded-circle" alt="" style="width: 90px;"*ngIf="client_gender=='Male'">
                        <img src="assets/img/avatars/account.png" class="rounded-circle" alt="" style="width: 90px;"*ngIf="client_gender!='Male' && client_gender!='Female'">
                      </div>
                      <div class="col-sm-12 col-md-11 col-lg-11 col-9">
                        <div class="row">
                      <div class="col-sm-8">

                          <div class="row">  <div class="col-sm-12 text-primary" style="text-transform: capitalize;font-weight: 600;">{{client_name}}
                                  </div>
                             
                              <div class="col-sm-12" > Contact: {{client_phone}} </div>
                              <div class="col-sm-12" > Email: {{client_email}} </div>
                              <div class="col-sm-12" > Age: {{client_age}} </div>

                          </div> 
                          

                      </div>
                      <div class="col-sm-4" style="text-align:right">
   
                        <!-- <button  style="margin-left: 10px;margin-right: 10px;" (click)="clickComplete()"  class="btn btn-success pull-right">Complete</button>  -->
                        <button  style="margin-left: 10px;" (click)="clickSave()" [disabled]="disable_save_button" class="btn btn-success pull-right">Save</button> 

                      <!-- </div>
                      <div class="col-sm-5" style="text-align:right">
   
                        <!-- <button  (click)="paymentModal.show()"  class="btn btn-success pull-right">Confirm</button>  -->

                      </div> -->
                     
                     
                         
                        </div>
            
                      </div>
                    </div>
                   
                  </div>
                  <div class="col-sm-12">
                      <mat-tab-group>
                        <mat-tab >
                          <ng-template mat-tab-label>
                            Feedback Details
                          </ng-template>
                          <div class="row">
                            <div class="col-sm-2">
                              <div class="col-sm-12"><h5> Select Category</h5></div>
                                 
                              <mat-radio-group  name="d">
                                <div class="row" style="margin-left: 10px;" *ngFor="let item of feedback_categories" >
                                     <mat-radio-button [value]="item.token"  [checked]="item.token==selected_feedback" (click)="getFeedbackQuestions(item.token)"   style="font-family: lato light;margin-right: 20px;"><h5>{{item.name}}</h5></mat-radio-button>
                                  </div>
                                              
                           
                             </mat-radio-group>
                      
                            </div>
                              <div class="col-sm-10">

                            <div class="row">
                                <div class="col-sm-12">
                                  
                                    <mat-horizontal-stepper linear="true" #stepper>
                                   <mat-step label="NPS" >
                                        <form >
                                          <div class="col-sm-12">
                                            <div class="row" style="justify-content: center;"> <h2><span  style="font-weight: bold;font-size: x-large;">How Would you recommend our service to others[1-10 stars]?</span></h2></div>
                                    
                                      <br>
                                      <div class="row" style="justify-content: center;margin-top: 20px;">
                                        <!-- <ngx-stars [readonly]="false" [size]="2" [maxStars]="10" [color]="recommendation_color"  *ngIf="show_rating_type=='initial'" (ratingOutput)="recommendation($event)" ></ngx-stars>
                                        <ngx-stars [readonly]="false" [size]="2" [maxStars]="10" [color]="'#dc3545'"   *ngIf="show_rating_type=='low'" [initialStars]="recommendation_rating" (ratingOutput)="recommendation($event)" ></ngx-stars>
                                        <ngx-stars [readonly]="false" [size]="2" [maxStars]="10" [color]="'#ffc107'"   *ngIf="show_rating_type=='middle'"   [initialStars]="recommendation_rating" (ratingOutput)="recommendation($event)" ></ngx-stars>
                                        <ngx-stars [readonly]="false" [size]="2" [maxStars]="10" [color]="'#28a745'"  *ngIf="show_rating_type=='high'"   [initialStars]="recommendation_rating" (ratingOutput)="recommendation($event)" ></ngx-stars> -->

                                        <star-rating value="0" totalstars="10" [checkedcolor]="recommendation_color" uncheckedcolor="black" size="48px" readonly="false" (rate)="recommendation($event)"></star-rating>
                                      </div>
                                            
                                    
                                        </div> 
                                    
                                        <div class="col-sm-12" style="margin-top: 20px;justify-content: center;display:flex">
                                        
                                              <button mat-raised-button  class="btn btn-success"  (click)= "next()">Next</button>
                                        
                                      </div>
                                          </form>
                                    
                                      
                                        </mat-step>
                                        <mat-step *ngFor="let item of  questions; let i = index" label="{{item.subcategory_name}}"   optional>
                                            <div class="row">
                                           
                                                      <form style="width: 100%;">
                                                      <div class="col-sm-12">
                                                    </div>
                                                      <br>
                                                      <div class="col-sm-12">
                                                        <div class="row" style="justify-content: center;"> <h4><span style="font-weight: bold;font-size: x-large;">{{item.question}}</span></h4></div>  
                                                 
                                                        <div class="row" style="justify-content: center;margin-top: 20px;">
                                                          <star-rating value="0" totalstars="5" checkedcolor="red" uncheckedcolor="black" size="48px" readonly="false" (rate)="rateClicked($event,item)"></star-rating>
                                                          <!-- <ngx-stars [readonly]="false" [size]="4" [maxStars]="5" (ratingOutput)="rateClicked($event,item)" ></ngx-stars> -->
                                                        </div>
                                                        <div >
                                                        <div class="row" style="justify-content: center;"  *ngIf="item.show_issues"> 
                                                            <button class="btn2"  *ngFor="let issue of item.issues" (click)="addItemInList(issue,item.selected_issues)"   [style.border]=" isItemInList(issue,item.selected_issues) ? '1px solid white' : '1px solid black'"  [style.background-color]=" isItemInList(issue,item.selected_issues)  ? 'red' : 'white'" [style.color]=" isItemInList(issue,item.selected_issues)  ? 'white' : 'black'"  style="margin: 10px; font-size: large;font-weight: 400;display:block;border-radius:30px;height:50px;color: black;padding-left: 10px;padding-right: 10px;">{{issue}}</button>
                                                        
                                                        </div>
                        
                                                        <div class="row" style="justify-content: center;"  *ngIf="item.show_compliments"> 
                                                          <button class="btn2"  *ngFor="let compliment of item.compliments" (click)="addItemInList(compliment,item.selected_compliments)"  [style.border]=" isItemInList(compliment,item.selected_compliments) ? '1px solid white' : '1px solid black'"  [style.background-color]=" isItemInList(compliment,item.selected_compliments) ? 'red' : 'white'" [style.color]="isItemInList(compliment,item.selected_compliments) ? 'white' : 'black'"  style="margin: 10px; font-size: large;font-weight: 400;display:block;border-radius:30px;height:50px;color: black;padding-left: 10px;padding-right: 10px;">{{compliment}}</button>
                                                        </div>
                                                       
                                                        </div>
                                                        <div class="row" style="justify-content: center;" > 
                                                          <mat-form-field class="fill-width" appearance="outline" style="max-width: 400px;">
                                                              <mat-label>Comment </mat-label>
                                                              <input matInput placeholder="Write here" name="comment" [(ngModel)] ="item.comment">    
                                                            </mat-form-field>
                                                      
                                                      </div>
                                                    </div>
                                                    <!-- <div class="row" style="justify-content: center;margin-top: 20px;">
                                                      <ngx-stars [readonly]="false" [size]="5" [maxStars]="10" (ratingOutput)="rateClicked($event,item)" ></ngx-stars>
                                                    </div> -->
                                                    
                                                  <div class="row" style="justify-content: center;">
                        
                                                      <!-- <button class="btn" type="submit" style="padding-top: 5px;padding-bottom: 5px; padding-left: 40px; padding-right: 40px; font-size: small; background-color: #abb8c3;color: white;margin-top: 20px; border-radius: 30px;" (click)="submitRating(i,item)">Next</button> -->
                                                      <button mat-raised-button  class="btn btn-success"  (click)= "submitRating(i,item)">Next</button>
                                                    <!-- <button class="btn" type="submit" style="padding-top: 5px;padding-bottom: 5px; padding-left: 40px; padding-right: 40px; font-size: small; background-color: #139e7e;color: white;margin-top: 20px; border-radius: 30px;" *ngIf="i==l" (click)="submitRating(i,item,true)">submit</button> -->
                                                  </div>
                                    
                                                      </form>
                                                     
                                            </div>
                                        </mat-step>
                                       
                                     
                                    </mat-horizontal-stepper>
                            </div>
                        </div>


                      </div>
                    </div>

                         </mat-tab> 
                         <mat-tab label="Notes" >

                          <fieldset>
                            <legend>Notes Details</legend>
                            <div class="col-sm-12">
                              <form>
                                <div class="row">
                            
                                    <div class="col-sm-12">
                                      <mat-form-field appearance="outline">
                                        <mat-label>Select Service</mat-label>
                                        <mat-select  [(ngModel)]="take_notes.service" name="service">
                                          <mat-option  *ngFor="let i of services" [value]="i">{{i}}</mat-option>
                                        </mat-select>
                                      </mat-form-field>
                                    </div>
                         
                                    <div class="col-sm-12">
                                          
                                      <mat-form-field  appearance="outline">
                                          <mat-label>Notes</mat-label>
                                          <textarea matInput cols="30" rows="5"  placeholder="Notes" name="notes"  [(ngModel)]="take_notes.notes"></textarea>
                                    </mat-form-field>
                                  </div>
                                  <div class="col-sm-12">
                                     <button (click)="takeNote()"  class="btn btn-success btn-sm pull-right" >save notes</button>
                                   
                                     
                                  </div>
                                </div>
                              </form>
                            </div>
                          </fieldset>
                          
  
                         </mat-tab>
                       

                        </mat-tab-group>
                  </div>
                  
                </div>
                
          </div>
        </div>
  </div> 

</div>


<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" ></ngx-loading>


